<section class="clients">
    <div class="container">
        <h3>Exemplos Http Clients</h3>
        <div fxLayout="row wrap" fxLayoutAlign="space-between start" fxLayoutGap="20px">
          
            <mat-card fxFlex="26" class="mat-elevation-z8">
                <mat-card-header>
                    <mat-card-title>{{title}} GET Simple </mat-card-title>
                </mat-card-header>
                <mat-card-content>
                    <!-- usando | async as, para fazer o subscribe aqui -->
                    <mat-list *ngIf="simpleReqProdObs$ | async as prods">
                        <mat-list-item *ngFor="let p of prods">
                            <mat-icon mat-list-icon>shop</mat-icon>
                            <h4 mat-line>{{p.name}}</h4>
                            <p mat-line>Department: {{p.department}} - Price: {{p.price | currency: 'R$'}}</p>
                        </mat-list-item>
                    </mat-list>
                </mat-card-content>
                <mat-card-actions>
                    <button mat-button color="primary" (click)="getSimpleHttpRequest()">
                        <mat-icon>swap_vert</mat-icon> Send Request
                    </button>
                </mat-card-actions>
                <mat-card-footer></mat-card-footer>
            </mat-card>

            <mat-card fxFlex="26" class="mat-elevation-z8">
                <mat-card-header>
                    <mat-card-title>{{title}} Error Handler</mat-card-title>
                </mat-card-header>
                <mat-card-content>
                    <ul *ngIf="prodErrorHandling">
                        <li *ngFor="let p of prodErrorHandling">{{p.name}}</li>
                    </ul>
                </mat-card-content>
                <mat-card-actions>
                    <button mat-button color="accent" (click)="getProdWithError()">
                        <mat-icon>swap_vert</mat-icon> Error Request
                    </button>
                    <button mat-button color="primary" (click)="getProdWithSuccess()">
                        <mat-icon>swap_vert</mat-icon> Success Request
                    </button>
                </mat-card-actions>
                <mat-card-footer></mat-card-footer>
            </mat-card>

            <mat-card fxFlex="26" class="mat-elevation-z8">
                <mat-card-header>
                    <mat-card-title>{{title}} Loading</mat-card-title>
                </mat-card-header>
                <mat-card-content>
                    <ul *ngIf="prodLoading">
                        <li *ngFor="let p of prodLoading">{{p.name}}</li>
                    </ul>
                </mat-card-content>
                <mat-card-actions>
                    <button mat-button color="primary" (click)="getProdLoading()">
                        <mat-icon>swap_vert</mat-icon> Success Request
                    </button>
                </mat-card-actions>
                <mat-card-footer>
                    <mat-progress-bar *ngIf="isLoading" mode="query"></mat-progress-bar>
                </mat-card-footer>
            </mat-card>

            <mat-card fxFlex="26" class="mat-elevation-z8">
                <mat-card-header>
                    <mat-card-title>{{title}} GET text</mat-card-title>
                </mat-card-header>
                <mat-card-content>
                   <mat-list>
                       <mat-list-item *ngFor="let p of prodIds; let i = index">
                            <mat-icon mat-list-icon>shop</mat-icon>
                            <h4 mat-line *ngIf="p.name != ''">{{p.name}}</h4>
                            <h4 mat-line *ngIf="p.name == ''">Product {{i}}</h4>
                            <button *ngIf="p.name == ''" mat-icon-button (click)="loadName(p._id)">
                                <mat-icon>refresh</mat-icon>
                            </button>
                       </mat-list-item>
                   </mat-list>
                </mat-card-content>
                <mat-card-actions>
                    <button mat-button color="primary" (click)="getProdIds()">
                        <mat-icon>swap_vert</mat-icon> Success Request
                    </button>
                </mat-card-actions>
                <mat-card-footer></mat-card-footer>
            </mat-card>

            <mat-card fxFlex="30" class="mat-elevation-z8">
                <mat-card-header>
                    <mat-card-title>{{title}} POST form</mat-card-title>
                </mat-card-header>
                <mat-card-content>

                 <div fxLayout="column" fxLayoutAlign="space-around stretch">
                    <mat-form-field floatLabel="always" appearance="outline">
                        <mat-label>Name</mat-label>
                        <input matInput placeholder="Product name" value="" type="text" #name>
                    </mat-form-field>  
                    <mat-form-field floatLabel="always" appearance="outline">
                        <mat-label>Department</mat-label>
                        <input matInput placeholder="Department" value="" type="text" #dep>
                    </mat-form-field>  
                    <mat-form-field floatLabel="always" appearance="outline">
                        <mat-label>Price</mat-label>
                        <input matInput placeholder="Price" value="" type="number" #price>
                    </mat-form-field>
                 </div>

                </mat-card-content>
                <mat-card-actions>
                    <button mat-button color="primary" (click)="saveProd(name.value, dep.value, price.value)">
                        <mat-icon>save</mat-icon> Save
                    </button>
                </mat-card-actions>
                <mat-card-footer></mat-card-footer>
            </mat-card>

            <mat-card fxFlex="30" class="mat-elevation-z8">
                <mat-card-header>
                    <mat-card-title>{{title}} DELETE / Edit</mat-card-title>
                </mat-card-header>
                <mat-card-content>
                    <mat-list>
                        <mat-list-item *ngFor="let p of prodToDelete">
                            <mat-icon mat-list-icon>shop</mat-icon>
                            <h4 mat-line>{{p.name}}</h4>
                            <p mat-line>Department: {{p.department}} - Price: {{p.price | currency: 'R$'}}</p>
                            <button mat-icon-button color="accent" (click)="prodDelete(p)">
                                <mat-icon>delete</mat-icon>
                            </button>
                            <button mat-icon-button color="warn" (click)="prodEdit(p)">
                                <mat-icon>edit</mat-icon>
                            </button>
                        </mat-list-item>
                    </mat-list>
                </mat-card-content>
                <mat-card-actions>
                    <button mat-button color="primary" (click)="prodLoadingToDelete()">
                        <mat-icon>swap_vert</mat-icon> Send Request
                    </button>
                </mat-card-actions>
                <mat-card-footer></mat-card-footer>
            </mat-card>
        </div>
    </div>
</section>